<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·ªë May M·∫Øn NƒÉm M·ªõi 2024</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Roboto:wght@400;500;700&display=swap">
    <style>
        :root {
            --primary-color: #e5464f;
            --secondary-color: #f8cf81;
            --accent-color: #fef2d5;
            --background-color: #fafafa;
            --text-primary: #8b0000;
            --text-secondary: #a17d1a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: #fff url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80" width="80" height="80"><path fill="%23f8cf81" fill-opacity="0.1" d="M40 0c22.091 0 40 17.909 40 40S62.091 80 40 80 0 62.091 0 40 17.909 0 40 0z"/></svg>');
            min-height: 100vh;
            padding: 2rem;
            position: relative;
            overflow-x: hidden;
        }

        /* Hi·ªáu ·ª©ng n·ªÅn */
        .background-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        /* Hi·ªáu ·ª©ng tuy·∫øt r∆°i */
        .snowflake {
            position: fixed;
            top: -10px;
            color: #fff;
            font-size: 1em;
            text-shadow: 0 0 5px #000;
            filter: blur(1px);
            z-index: 1;
            pointer-events: none;
            animation: snowfall linear infinite;
        }

        @keyframes snowfall {
            0% {
                transform: translateY(-10vh) rotate(0deg);
            }

            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Hi·ªáu ·ª©ng hoa mai */
        .blossom {
            position: fixed;
            z-index: 1;
            pointer-events: none;
            animation: blossom-fall linear infinite;
        }

        @keyframes blossom-fall {
            0% {
                transform: translate(0, -10px) rotate(0deg);
            }

            100% {
                transform: translate(20px, 100vh) rotate(360deg);
            }
        }

        /* Hi·ªáu ·ª©ng ph√°o hoa */
        .firework {
            position: fixed;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
            z-index: 2;
            pointer-events: none;
        }

        @keyframes explode {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(30);
                opacity: 0;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 3;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--secondary-color);
        }

        .header h1 {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-color);
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        .groups {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .group {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            border: 2px solid var(--secondary-color);
        }

        .group:hover {
            transform: translateY(-5px);
        }

        .group-title {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2.5rem;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        .result-display {
            min-height: 120px;
            background: var(--accent-color);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            align-items: center;
            border: 2px dashed var(--secondary-color);
        }

        .number {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-color), #ff8c8c);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            animation: popIn 0.3s ease-out;
            border: 2px solid #fff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        @keyframes popIn {
            0% {
                transform: scale(0) rotate(-180deg);
                opacity: 0;
            }

            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .controls {
            display: grid;
            gap: 1rem;
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.8rem;
            margin-bottom: 1rem;
        }

        button {
            padding: 1rem;
            border: none;
            border-radius: 0.8rem;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .select-btn {
            background: var(--primary-color);
            color: white;
            border: 2px solid var(--secondary-color);
        }

        .select-btn:hover {
            background: #ff6b6b;
            transform: translateY(-2px);
        }

        .reset-btn {
            grid-column: span 4;
            background: #8b0000;
            color: white;
            border: 2px solid var(--secondary-color);
        }

        .reset-btn:hover {
            background: #a00;
            transform: translateY(-2px);
        }

        .remaining {
            background: var(--accent-color);
            border-radius: 0.8rem;
            padding: 1rem;
            font-size: 0.9rem;
            max-height: 120px;
            overflow-y: auto;
            color: var(--text-secondary);
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--accent-color);
            border: 1px solid var(--secondary-color);
        }

        .remaining::-webkit-scrollbar {
            width: 6px;
        }

        .remaining::-webkit-scrollbar-track {
            background: var(--accent-color);
        }

        .remaining::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 3px;
        }

        .sound-controls {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .sound-btn {
            background: var(--primary-color);
            color: white;
            padding: 0.5rem 1rem;
            border: 2px solid var(--secondary-color);
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .sound-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2.5rem;
            }

            .groups {
                grid-template-columns: 1fr;
            }

            .buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .reset-btn {
                grid-column: span 2;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üéä S·ªë May M·∫Øn NƒÉm M·ªõi 2024 üéä</h1>
            <p>Ch·ªçn s·ªë may m·∫Øn ƒë·∫ßu nƒÉm - V·∫°n s·ª± nh∆∞ √Ω</p>
            <div class="sound-controls">
                <button id="toggleMusic" class="sound-btn">
                    üéµ B·∫≠t/T·∫Øt Nh·∫°c
                </button>
                <!-- <button id="toggleEffect" class="sound-btn">
                    üîä B·∫≠t/T·∫Øt Hi·ªáu ·ª®ng
                </button> -->
            </div>
        </div>

        <div class="groups">
            <div class="group">
                <h2 class="group-title">C·∫∑p S·ªë L√™n B·∫£ng</h2>
                <div id="resultA" class="result-display"></div>
                <div class="controls">
                    <div class="buttons">
                        <button class="select-btn" onclick="selectNumbers('A', 1)">Ch·ªçn 1</button>
                        <button class="select-btn" onclick="selectNumbers('A', 2)">Ch·ªçn 2</button>
                        <button class="select-btn" onclick="selectNumbers('A', 3)">Ch·ªçn 3</button>
                        <button class="select-btn" onclick="selectNumbers('A', 4)">Ch·ªçn 4</button>
                        <button class="reset-btn" onclick="resetGroup('A')">Ch·ªçn L·∫°i t·ª´ ƒë·∫ßu</button>
                    </div>
                    <div id="remainingA" class="remaining"></div>
                </div>
            </div>

            <div class="group">
                <h2 class="group-title">C·∫∑p S·ªë Ch·ªØa B√†i</h2>
                <div id="resultB" class="result-display"></div>
                <div class="controls">
                    <div class="buttons">
                        <button class="select-btn" onclick="selectNumbers('B', 1)">Ch·ªçn 1</button>
                        <button class="select-btn" onclick="selectNumbers('B', 2)">Ch·ªçn 2</button>
                        <button class="select-btn" onclick="selectNumbers('B', 3)">Ch·ªçn 3</button>
                        <button class="select-btn" onclick="selectNumbers('B', 4)">Ch·ªçn 4</button>
                        <button class="reset-btn" onclick="resetGroup('B')">Ch·ªçn L·∫°i t·ª´ ƒë·∫ßu</button>
                    </div>
                    <div id="remainingB" class="remaining"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Qu·∫£n l√Ω tr·∫°ng th√°i √¢m thanh
const soundState = {
    backgroundMusic: true, // M·∫∑c ƒë·ªãnh b·∫≠t nh·∫°c
    effects: true
};

// Qu·∫£n l√Ω √¢m thanh
const soundEffects = {
    select: null,
    firework: null,
    reset: null,
    background: null
};

// Qu·∫£n l√Ω s·ªë
const groups = {
    A: {
        numbers: Array.from({length: 47}, (_, i) => i + 1)
    },
    B: {
        numbers: Array.from({length: 47}, (_, i) => i + 1)
    }
};

// Kh·ªüi t·∫°o √¢m thanh
function initSounds() {
    try {
        // Kh·ªüi t·∫°o c√°c audio
        soundEffects.select = new Audio('sounds/select.mp3');
        soundEffects.firework = new Audio('sounds/firework.mp3');
        soundEffects.reset = new Audio('sounds/reset.mp3');
        soundEffects.background = new Audio('sounds/background.mp3');
        
        // C·∫•u h√¨nh audio n·ªÅn
        soundEffects.background.loop = true;
        soundEffects.background.volume = 0.3;
        
        // Th√™m x·ª≠ l√Ω s·ª± ki·ªán cho audio n·ªÅn
        soundEffects.background.addEventListener('canplaythrough', () => {
            if (soundState.backgroundMusic) {
                playBackgroundMusic();
            }
        });

        // X·ª≠ l√Ω l·ªói khi ph√°t audio
        soundEffects.background.addEventListener('error', (e) => {
            console.warn('L·ªói ph√°t nh·∫°c n·ªÅn:', e);
            soundState.backgroundMusic = false;
        });

    } catch (error) {
        console.warn('Kh√¥ng th·ªÉ t·∫£i file √¢m thanh:', error);
        soundEffects.select = null;
        soundEffects.firework = null;
        soundEffects.reset = null;
        soundEffects.background = null;
    }

    // Kh·ªüi t·∫°o tr·∫°ng th√°i n√∫t ƒëi·ªÅu khi·ªÉn
    const musicBtn = document.getElementById('toggleMusic');
    musicBtn.textContent = soundState.backgroundMusic ? 'üéµ T·∫Øt Nh·∫°c' : 'üéµ B·∫≠t Nh·∫°c';
    
    // Th√™m s·ª± ki·ªán cho c√°c n√∫t ƒëi·ªÅu khi·ªÉn √¢m thanh
    musicBtn.addEventListener('click', toggleBackgroundMusic);
    document.getElementById('toggleEffect').addEventListener('click', toggleSoundEffects);
}

// Ph√°t nh·∫°c n·ªÅn
function playBackgroundMusic() {
    if (soundEffects.background) {
        const playPromise = soundEffects.background.play();
        if (playPromise) {
            playPromise.catch((error) => {
                console.warn('Kh√¥ng th·ªÉ ph√°t nh·∫°c n·ªÅn:', error);
                // Th·ª≠ ph√°t l·∫°i khi c√≥ t∆∞∆°ng t√°c ng∆∞·ªùi d√πng
                document.addEventListener('click', () => {
                    if (soundState.backgroundMusic) {
                        soundEffects.background.play();
                    }
                }, { once: true });
            });
        }
    }
}

// D·ª´ng nh·∫°c n·ªÅn
function stopBackgroundMusic() {
    if (soundEffects.background) {
        soundEffects.background.pause();
        soundEffects.background.currentTime = 0;
    }
}

// B·∫≠t/t·∫Øt nh·∫°c n·ªÅn
function toggleBackgroundMusic() {
    soundState.backgroundMusic = !soundState.backgroundMusic;
    const btn = document.getElementById('toggleMusic');
    
    if (soundState.backgroundMusic) {
        playBackgroundMusic();
        btn.textContent = 'üéµ T·∫Øt Nh·∫°c';
    } else {
        stopBackgroundMusic();
        btn.textContent = 'üéµ B·∫≠t Nh·∫°c';
    }
}

// B·∫≠t/t·∫Øt hi·ªáu ·ª©ng √¢m thanh
function toggleSoundEffects() {
    soundState.effects = !soundState.effects;
    const btn = document.getElementById('toggleEffect');
    btn.textContent = soundState.effects ? 'üîä T·∫Øt Hi·ªáu ·ª®ng' : 'üîà B·∫≠t Hi·ªáu ·ª®ng';
}

// Ph√°t √¢m thanh
function playSound(type) {
    if (!soundEffects[type] || (type !== 'background' && !soundState.effects)) {
        return;
    }

    try {
        soundEffects[type].pause();
        soundEffects[type].currentTime = 0;
        const playPromise = soundEffects[type].play();
        if (playPromise) {
            playPromise.catch(error => console.warn(`L·ªói ph√°t √¢m thanh: ${error}`));
        }
    } catch (error) {
        console.warn(`L·ªói x·ª≠ l√Ω √¢m thanh: ${error}`);
    }
}

// T·∫°o hi·ªáu ·ª©ng tuy·∫øt r∆°i
function createSnowflakes() {
    const snowflakes = ['‚ùÑ', '‚Ä¢', '‚ùÖ', '‚ùÜ'];
    for (let i = 0; i < 30; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = snowflakes[Math.floor(Math.random() * snowflakes.length)];
        snowflake.style.left = Math.random() * 100 + 'vw';
        snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
        snowflake.style.opacity = Math.random();
        document.body.appendChild(snowflake);
    }
}

// T·∫°o hi·ªáu ·ª©ng hoa mai
function createBlossoms() {
    const blossoms = ['üå∏', 'üå∫'];
    for (let i = 0; i < 20; i++) {
        const blossom = document.createElement('div');
        blossom.className = 'blossom';
        blossom.textContent = blossoms[Math.floor(Math.random() * blossoms.length)];
        blossom.style.left = Math.random() * 100 + 'vw';
        blossom.style.animationDuration = (Math.random() * 5 + 3) + 's';
        blossom.style.opacity = Math.random() * 0.7 + 0.3;
        document.body.appendChild(blossom);
    }
}

// T·∫°o hi·ªáu ·ª©ng ph√°o hoa
function createFirework(x, y) {
    const colors = ['#ff0000', '#ffd700', '#ff69b4', '#00ff00', '#ff4500'];
    for (let i = 0; i < 30; i++) {
        const firework = document.createElement('div');
        firework.className = 'firework';
        firework.style.left = x + 'px';
        firework.style.top = y + 'px';
        firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        document.body.appendChild(firework);
        setTimeout(() => firework.remove(), 1000);
    }
    playSound('firework');
}

// T·ª± ƒë·ªông t·∫°o ph√°o hoa
function autoFireworks() {
    const x = Math.random() * window.innerWidth;
    const y = Math.random() * (window.innerHeight * 0.5);
    createFirework(x, y);
    setTimeout(autoFireworks, Math.random() * 2000 + 1000);
}

// C·∫≠p nh·∫≠t s·ªë c√≤n l·∫°i
function updateRemaining(group) {
    const remainingEl = document.getElementById(`remaining${group}`);
    remainingEl.textContent = `C√°c s·ªë c√≤n l·∫°i: ${groups[group].numbers.join(', ')}`;
}

// Ch·ªçn s·ªë
function selectNumbers(group, count) {
    const numbers = groups[group].numbers;
    const resultEl = document.getElementById(`result${group}`);

    if (numbers.length < count) {
        alert('Kh√¥ng ƒë·ªß s·ªë ƒë·ªÉ ch·ªçn! Vui l√≤ng ch·ªçn l·∫°i t·ª´ ƒë·∫ßu.');
        return;
    }

    resultEl.innerHTML = '';
    playSound('select');

    for (let i = 0; i < count; i++) {
        const randomIndex = Math.floor(Math.random() * numbers.length);
        const selectedNumber = numbers.splice(randomIndex, 1)[0];

        setTimeout(() => {
            const numberEl = document.createElement('div');
            numberEl.className = 'number';
            numberEl.textContent = selectedNumber;
            resultEl.appendChild(numberEl);

            const rect = numberEl.getBoundingClientRect();
            createFirework(rect.left + rect.width/2, rect.top + rect.height/2);
        }, i * 300);
    }

    updateRemaining(group);
}

// Reset nh√≥m s·ªë
function resetGroup(group) {
    groups[group].numbers = Array.from({length: 47}, (_, i) => i + 1);
    const resultEl = document.getElementById(`result${group}`);
    resultEl.innerHTML = '';
    updateRemaining(group);
    playSound('reset');
}

// Kh·ªüi t·∫°o khi trang load
window.addEventListener('load', () => {
    initSounds();
    createSnowflakes();
    createBlossoms();
    autoFireworks();
    updateRemaining('A');
    updateRemaining('B');
    
    // Th√™m x·ª≠ l√Ω t∆∞∆°ng t√°c ng∆∞·ªùi d√πng ƒë·ªÉ ph√°t nh·∫°c
    document.addEventListener('click', () => {
        if (soundState.backgroundMusic && soundEffects.background) {
            soundEffects.background.play();
        }
    }, { once: true });
});

// T·ª± ƒë·ªông t·∫°o l·∫°i tuy·∫øt v√† hoa mai
setInterval(() => {
    const snowflakes = document.querySelectorAll('.snowflake');
    const blossoms = document.querySelectorAll('.blossom');
    
    snowflakes.forEach(snow => snow.remove());
    blossoms.forEach(blossom => blossom.remove());
    
    createSnowflakes();
    createBlossoms();
}, 10000);

// C·∫£nh b√°o khi reload trang
window.addEventListener('beforeunload', (e) => {
    if (document.getElementById('resultA').children.length > 0 || 
        document.getElementById('resultB').children.length > 0) {
        e.preventDefault();
        e.returnValue = 'C√°c s·ªë ƒë√£ ch·ªçn s·∫Ω b·ªã m·∫•t. B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën t·∫£i l·∫°i trang?';
        return e.returnValue;
    }
});
    </script>
</body>

</html>